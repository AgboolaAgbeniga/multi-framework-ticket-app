import{c as h,d as T,p as d,w as r,b as o,t as c,n as w,q as B,o as i,h as S,s as y,r as z,v as M,x as N,l as P,a as m,g as a,_ as p,u as l,f as g,j as _}from"./index-T0rM1uMv.js";import{_ as f}from"./Card.vue_vue_type_script_setup_true_lang-C0CR5e0M.js";import{C as $}from"./clock-tiBqqBIX.js";import{C as A}from"./circle-check-big-DWrUycj_.js";/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=h("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=h("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=h("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),q={class:"flex items-center justify-between"},O={class:"text-slate-600 text-sm mb-1"},R={class:"text-3xl"},u=T({__name:"StatCard",props:{title:{},value:{},icon:{},iconColor:{},iconBgColor:{}},setup(n){return(k,v)=>(i(),d(f,{class:"p-6 hover:shadow-lg transition-shadow"},{default:r(()=>[o("div",q,[o("div",null,[o("p",O,c(n.title),1),o("p",R,c(n.value),1)]),o("div",{class:w(`w-12 h-12 ${n.iconBgColor} rounded-full flex items-center justify-center`)},[(i(),d(B(n.icon),{class:w(`w-6 h-6 ${n.iconColor}`)},null,8,["class"]))],2)])]),_:1}))}}),F={class:"flex flex-col"},G={class:"flex-1 bg-slate-50 py-8"},I={class:"max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8"},E={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8"},L={class:"text-slate-600"},Q={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},U={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},W={class:"flex flex-wrap"},Y={key:0,class:"text-slate-600 mb-4 text-sm"},Z={key:1,class:"text-slate-600 mb-4 text-sm"},te=T({__name:"Dashboard",setup(n){const k=P(),v=S(),V=y(()=>v.user),t=z({total:0,open:0,inProgress:0,closed:0}),j=y(()=>{if(t.value.total===0)return"";const e=[];return t.value.open>0&&e.push(`${t.value.open} open ${t.value.open===1?"ticket":"tickets"}`),t.value.inProgress>0&&e.push(`${t.value.inProgress} in progress`),t.value.closed>0&&e.push(`${t.value.closed} resolved ${t.value.closed===1?"ticket":"tickets"}`),e.length===0?"":e.length===1?e[0]:e.length===2?`${e[0]} and ${e[1]}`:`${e.slice(0,-1).join(", ")}, and ${e[e.length-1]}`});return M(async()=>{try{const e=await N();e.ok&&e.data?t.value=e.data:(e.error==="Unauthorized"||e.error==="Token expired")&&(v.logout(),k.push("/auth/login"))}catch(e){console.error("Failed to load stats:",e)}}),(e,s)=>{var x;return i(),m("div",F,[o("main",G,[o("div",I,[o("div",E,[o("div",null,[s[3]||(s[3]=o("h1",{class:"mb-2"},"Dashboard",-1)),o("p",L," Welcome back, "+c((x=V.value)==null?void 0:x.name)+"! Here's an overview of your tickets. ",1)]),a(p,{onClick:s[0]||(s[0]=b=>e.$router.push("/tickets?new=true")),size:"lg",class:"shrink-0"},{default:r(()=>[a(l(C),{class:"w-4 h-4 mr-2"}),s[4]||(s[4]=g(" New Ticket ",-1))]),_:1})]),o("div",Q,[a(u,{title:"Total Tickets",value:t.value.total,icon:l(C),"icon-color":"text-indigo-600","icon-bg-color":"bg-indigo-100"},null,8,["value","icon"]),a(u,{title:"Open Tickets",value:t.value.open,icon:l(H),"icon-color":"text-green-600","icon-bg-color":"bg-green-100"},null,8,["value","icon"]),a(u,{title:"In Progress",value:t.value.inProgress,icon:l($),"icon-color":"text-amber-600","icon-bg-color":"bg-amber-100"},null,8,["value","icon"]),a(u,{title:"Resolved",value:t.value.closed,icon:l(A),"icon-color":"text-slate-600","icon-bg-color":"bg-slate-100"},null,8,["value","icon"])]),o("div",U,[a(f,{class:"p-6 bg-linear-to-br from-indigo-500 to-purple-600 text-white"},{default:r(()=>[s[5]||(s[5]=o("h3",{class:"text-white font-bold"},"Quick Actions",-1)),s[6]||(s[6]=o("p",{class:"text-white/90 mb-4 text-sm"}," Get started by creating a new ticket or manage your existing ones. ",-1)),o("div",W,[t.value.total>0?(i(),d(p,{key:0,variant:"secondary",onClick:s[1]||(s[1]=b=>e.$router.push("/tickets")),class:"w-full"},{default:r(()=>[a(l($),{class:"w-4 h-4 mr-2"}),g(" View All "+c(t.value.total)+" Tickets ",1)]),_:1})):_("",!0)])]),_:1}),a(f,{class:"p-6 bg-linear-to-br from-slate-50 to-slate-100/80"},{default:r(()=>[s[8]||(s[8]=o("h3",{class:"font-bold"},"Status Overview",-1)),t.value.total===0?(i(),m("p",Y," No tickets yet. Create your first one! ")):(i(),m("p",Z," You have "+c(j.value)+". ",1)),t.value.open>0||t.value.inProgress>0?(i(),d(p,{key:2,variant:"outline",size:"sm",class:"w-full",onClick:s[2]||(s[2]=b=>e.$router.push("/tickets"))},{default:r(()=>[a(l(D),{class:"w-4 h-4 mr-2"}),s[7]||(s[7]=g(" View Details ",-1))]),_:1})):_("",!0)]),_:1})])])])])}}});export{te as default};
