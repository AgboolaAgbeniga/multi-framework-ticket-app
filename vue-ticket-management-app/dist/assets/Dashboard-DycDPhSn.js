import{c as k,d as C,l as m,w as r,b as o,t as c,n as b,m as B,o as i,p as w,r as S,q as j,k as z,a as v,g as a,_ as f,u as l,f as g,i as y}from"./index-D-jYYqdM.js";import{u as M}from"./auth-Bf8flnz-.js";import{a as N}from"./mockApi-C_tOe63w.js";import{_ as h}from"./Card.vue_vue_type_script_setup_true_lang-B3O1-FYv.js";import{C as _}from"./clock-DzUVogLl.js";import{C as P}from"./circle-check-big-BJ6NvSZI.js";/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=k("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=k("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-vue-next v0.548.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=k("ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),H={class:"flex items-center justify-between"},O={class:"text-slate-600 text-sm mb-1"},q={class:"text-3xl"},d=C({__name:"StatCard",props:{title:{},value:{},icon:{},iconColor:{},iconBgColor:{}},setup(n){return(p,u)=>(i(),m(h,{class:"p-6 hover:shadow-lg transition-shadow"},{default:r(()=>[o("div",H,[o("div",null,[o("p",O,c(n.title),1),o("p",q,c(n.value),1)]),o("div",{class:b(`w-12 h-12 ${n.iconBgColor} rounded-full flex items-center justify-center`)},[(i(),m(B(n.icon),{class:b(`w-6 h-6 ${n.iconColor}`)},null,8,["class"]))],2)])]),_:1}))}}),R={class:"min-h-screen flex flex-col"},F={class:"flex-1 bg-slate-50 py-8"},G={class:"max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8"},I={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8"},E={class:"text-slate-600"},L={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},U={class:"flex flex-wrap"},W={key:0,class:"text-slate-600 mb-4 text-sm"},Y={key:1,class:"text-slate-600 mb-4 text-sm"},se=C({__name:"Dashboard",setup(n){const p=z(),u=M(),T=w(()=>u.user),t=S({total:0,open:0,inProgress:0,closed:0}),V=w(()=>{if(t.value.total===0)return"";const e=[];return t.value.open>0&&e.push(`${t.value.open} open ${t.value.open===1?"ticket":"tickets"}`),t.value.inProgress>0&&e.push(`${t.value.inProgress} in progress`),t.value.closed>0&&e.push(`${t.value.closed} resolved ${t.value.closed===1?"ticket":"tickets"}`),e.length===0?"":e.length===1?e[0]:e.length===2?`${e[0]} and ${e[1]}`:`${e.slice(0,-1).join(", ")}, and ${e[e.length-1]}`});return j(async()=>{if(!u.isAuthenticated){p.push("/auth/login");return}try{const e=await N();e.ok&&e.data?t.value=e.data:(e.error==="Unauthorized"||e.error==="Token expired")&&(u.logout(),p.push("/auth/login"))}catch(e){console.error("Failed to load stats:",e)}}),(e,s)=>(i(),v("div",R,[o("main",F,[o("div",G,[o("div",I,[o("div",null,[s[3]||(s[3]=o("h1",{class:"mb-2"},"Dashboard",-1)),o("p",E," Welcome back, "+c(T.value?.name)+"! Here's an overview of your tickets. ",1)]),a(f,{onClick:s[0]||(s[0]=x=>e.$router.push("/tickets?new=true")),size:"lg",class:"shrink-0"},{default:r(()=>[a(l($),{class:"w-4 h-4 mr-2"}),s[4]||(s[4]=g(" New Ticket ",-1))]),_:1})]),o("div",L,[a(d,{title:"Total Tickets",value:t.value.total,icon:l($),"icon-color":"text-indigo-600","icon-bg-color":"bg-indigo-100"},null,8,["value","icon"]),a(d,{title:"Open Tickets",value:t.value.open,icon:l(D),"icon-color":"text-green-600","icon-bg-color":"bg-green-100"},null,8,["value","icon"]),a(d,{title:"In Progress",value:t.value.inProgress,icon:l(_),"icon-color":"text-amber-600","icon-bg-color":"bg-amber-100"},null,8,["value","icon"]),a(d,{title:"Resolved",value:t.value.closed,icon:l(P),"icon-color":"text-slate-600","icon-bg-color":"bg-slate-100"},null,8,["value","icon"])]),o("div",Q,[a(h,{class:"p-6 bg-linear-to-br from-indigo-500 to-purple-600 text-white"},{default:r(()=>[s[5]||(s[5]=o("h3",{class:"text-white font-bold"},"Quick Actions",-1)),s[6]||(s[6]=o("p",{class:"text-white/90 mb-4 text-sm"}," Get started by creating a new ticket or manage your existing ones. ",-1)),o("div",U,[t.value.total>0?(i(),m(f,{key:0,variant:"secondary",onClick:s[1]||(s[1]=x=>e.$router.push("/tickets?status=open")),class:"w-full"},{default:r(()=>[a(l(_),{class:"w-4 h-4 mr-2"}),g(" View "+c(t.value.total)+" Open Tickets ",1)]),_:1})):y("",!0)])]),_:1}),a(h,{class:"p-6 bg-linear-to-br from-slate-50 to-slate-100/80"},{default:r(()=>[s[8]||(s[8]=o("h3",{class:"font-bold"},"Status Overview",-1)),t.value.total===0?(i(),v("p",W," No tickets yet. Create your first one! ")):(i(),v("p",Y," You have "+c(V.value)+". ",1)),t.value.open>0||t.value.inProgress>0?(i(),m(f,{key:2,variant:"outline",size:"sm",class:"w-full",onClick:s[2]||(s[2]=x=>e.$router.push("/tickets"))},{default:r(()=>[a(l(A),{class:"w-4 h-4 mr-2"}),s[7]||(s[7]=g(" View Details ",-1))]),_:1})):y("",!0)]),_:1})])])])]))}});export{se as default};
